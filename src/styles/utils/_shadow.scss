@use 'sass:list';

@mixin shadow($positions...) {
    $shadow: none;

    @each $position-key, $size-key in $positions {
        @if not list.index($extended-position-keys, $position-key) {
            @error "No position #{$position-key}";
        }

        @if not list.index($size-keys, $size-key) {
            @error "No size #{$size-key}";
        }

        @if $position-key ==
            top or
            $position-key ==
            left or
            $position-key ==
            top-left or
            $position-key ==
            all
        {
            $top-left-shadow: var(--sbsys-shadows-top-left)
                var(--sbsys-shadows-#{$size-key})
                rgb(var(--sbsys-shadow-top-left-color) / 0.1);

            @if $shadow == none {
                $shadow: $top-left-shadow;
            } @else {
                $shadow: $shadow, $top-left-shadow;
            }
        }

        @if $position-key ==
            top or
            $position-key ==
            right or
            $position-key ==
            top-right or
            $position-key ==
            all
        {
            $top-right-shadow: var(--sbsys-shadows-top-right)
                var(--sbsys-shadows-#{$size-key})
                rgb(var(--sbsys-shadow-top-right-color) / 0.1);

            @if $shadow == none {
                $shadow: $top-right-shadow;
            } @else {
                $shadow: $shadow, $top-right-shadow;
            }
        }

        @if $position-key ==
            bottom or
            $position-key ==
            left or
            $position-key ==
            bottom-left or
            $position-key ==
            all
        {
            $bottom-left-shadow: var(--sbsys-shadows-bottom-left)
                var(--sbsys-shadows-#{$size-key})
                rgb(var(--sbsys-shadow-bottom-left-color) / 0.1);

            @if $shadow == none {
                $shadow: $bottom-left-shadow;
            } @else {
                $shadow: $shadow, $bottom-left-shadow;
            }
        }

        @if $position-key ==
            bottom or
            $position-key ==
            right or
            $position-key ==
            bottom-right or
            $position-key ==
            all
        {
            $bottom-right-shadow: var(--sbsys-shadows-bottom-right)
                var(--sbsys-shadows-#{$size-key})
                rgb(var(--sbsys-shadow-bottom-right-color) / 0.1);

            @if $shadow == none {
                $shadow: $bottom-right-shadow;
            } @else {
                $shadow: $shadow, $bottom-right-shadow;
            }
        }
    }

    box-shadow: $shadow;
}
